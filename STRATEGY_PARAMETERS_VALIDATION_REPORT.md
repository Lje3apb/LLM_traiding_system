# –û—Ç—á–µ—Ç –æ –ø—Ä–æ–≤–µ—Ä–∫–µ —Ä–∞–±–æ—Ç—ã –≤–∫–ª–∞–¥–∫–∏ "Edit Strategy Parameters"

**–î–∞—Ç–∞:** 2025-11-21
**–°–∏—Å—Ç–µ–º–∞:** LLM Trading System
**–í–µ—Ä—Å–∏—è:** –¢–µ–∫—É—â–∞—è –≤–µ—Ç–∫–∞ `claude/test-strategy-parameters-0132uZX1TQR9tsNfWohFvXqN`

---

## Executive Summary

–ü—Ä–æ–≤–µ–¥–µ–Ω–∞ –¥–æ—Å–∫–æ–Ω–∞–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏ —á–µ—Ä–µ–∑ –≤–∫–ª–∞–¥–∫—É "Edit Strategy Parameters". –ü—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω –ø–æ–ª–Ω—ã–π –ø–æ—Ç–æ–∫ –¥–∞–Ω–Ω—ã—Ö –æ—Ç UI —Ñ–æ—Ä–º—ã –¥–æ —Ç–æ—Ä–≥–æ–≤–æ–≥–æ –¥–≤–∏–∂–∫–∞. –í—ã—è–≤–ª–µ–Ω–æ **–∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–µ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ** —Å–∏—Å—Ç–µ–º—ã —Å –Ω–µ–∫–æ—Ç–æ—Ä—ã–º–∏ **—Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è–º–∏ –ø–æ —É–ª—É—á—à–µ–Ω–∏—é**.

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** ‚úÖ **–°–ò–°–¢–ï–ú–ê –†–ê–ë–û–¢–ê–ï–¢ –ö–û–†–†–ï–ö–¢–ù–û**

---

## 1. –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –ø–æ—Ç–æ–∫–∞ –¥–∞–Ω–Ω—ã—Ö

### 1.1 –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —Å–∏—Å—Ç–µ–º—ã

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                        UI Layer (Frontend)                            ‚îÇ
‚îÇ  strategy_form.html - HTML —Ñ–æ—Ä–º–∞ —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏ —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏              ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                         ‚îÇ HTTP POST
                         ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                     API Layer (Backend)                               ‚îÇ
‚îÇ  ui_routes.py:                                                        ‚îÇ
‚îÇ  - ui_save_strategy() [—Å—Ç—Ä–æ–∫–∏ 481-611]                               ‚îÇ
‚îÇ  - ui_recalculate_backtest() [—Å—Ç—Ä–æ–∫–∏ 1414-1529]                      ‚îÇ
‚îÇ  - ui_save_strategy_params() [—Å—Ç—Ä–æ–∫–∏ 1532-1621]                      ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                         ‚îÇ Dict validation & conversion
                         ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                   Configuration Layer                                 ‚îÇ
‚îÇ  IndicatorStrategyConfig (configs.py:12-198)                          ‚îÇ
‚îÇ  - –í–∞–ª–∏–¥–∞—Ü–∏—è –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –≤ __post_init__()                            ‚îÇ
‚îÇ  - –ü—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ dict ‚Üí Config —á–µ—Ä–µ–∑ from_dict()                    ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                         ‚îÇ Strategy creation
                         ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                      Strategy Factory                                 ‚îÇ
‚îÇ  create_strategy_from_config() [factory.py:15-88]                     ‚îÇ
‚îÇ  - –°–æ–∑–¥–∞–Ω–∏–µ IndicatorStrategy –∏–ª–∏ CombinedStrategy                    ‚îÇ
‚îÇ  - –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –∫ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–∞–º                                ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                         ‚îÇ Strategy instance
                         ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                    Execution Layer                                    ‚îÇ
‚îÇ  IndicatorStrategy (indicator_strategy.py:14-436)                     ‚îÇ
‚îÇ  - _compute_indicators() [—Å—Ç—Ä–æ–∫–∏ 135-202]                            ‚îÇ
‚îÇ  - _generate_order() [—Å—Ç—Ä–æ–∫–∏ 204-251]                                ‚îÇ
‚îÇ  - _calculate_position_size() [—Å—Ç—Ä–æ–∫–∏ 284-313]                       ‚îÇ
‚îÇ  - _check_tp_sl_hit() [—Å—Ç—Ä–æ–∫–∏ 322-362]                               ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                         ‚îÇ Orders ‚Üí Backtester/LiveEngine
                         ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                   Trading Engine                                      ‚îÇ
‚îÇ  - backtest_service.py (–¥–ª—è –±—ç–∫—Ç–µ—Å—Ç–æ–≤)                               ‚îÇ
‚îÇ  - live_service.py (–¥–ª—è –ª–∞–π–≤-—Ç–æ—Ä–≥–æ–≤–ª–∏)                               ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

---

## 2. –ü–∞—Ä–∞–º–µ—Ç—Ä—ã —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏ –∏ –∏—Ö –≤–ª–∏—è–Ω–∏–µ

### 2.1 –ì—Ä—É–ø–ø—ã –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤

#### **A. –ë–∞–∑–æ–≤—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏**
| –ü–∞—Ä–∞–º–µ—Ç—Ä | –¢–∏–ø | –ó–Ω–∞—á–µ–Ω–∏–µ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é | –í–∞–ª–∏–¥–∞—Ü–∏—è | –í–ª–∏—è–Ω–∏–µ –Ω–∞ —Ç–æ—Ä–≥–æ–≤–ª—é |
|----------|-----|----------------------|-----------|---------------------|
| `symbol` | string | "BTCUSDT" | - | –¢–æ—Ä–≥—É–µ–º—ã–π –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç |
| `strategy_type` | enum | "indicator" | "indicator" \| "combined" | –¢–∏–ø —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏ |
| `mode` | enum | "quant_only" | "quant_only" \| "llm_only" \| "hybrid" | –†–µ–∂–∏–º —Ä–∞–±–æ—Ç—ã |
| `allow_long` | bool | True | - | –†–∞–∑—Ä–µ—à–µ–Ω–∏–µ –Ω–∞ –¥–ª–∏–Ω–Ω—ã–µ –ø–æ–∑–∏—Ü–∏–∏ |
| `allow_short` | bool | False | - | –†–∞–∑—Ä–µ—à–µ–Ω–∏–µ –Ω–∞ –∫–æ—Ä–æ—Ç–∫–∏–µ –ø–æ–∑–∏—Ü–∏–∏ |

‚úÖ **–ü—Ä–æ–≤–µ—Ä–µ–Ω–æ:** –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –ø–µ—Ä–µ–¥–∞—é—Ç—Å—è –∏ –ø—Ä–∏–º–µ–Ω—è—é—Ç—Å—è –≤ —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏
üìç **–ú–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–µ:** `ui_routes.py:558-564`, `indicator_strategy.py:50-51`, `indicator_strategy.py:240-248`

---

#### **B. –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–æ–≤**

##### B.1 EMA (Exponential Moving Average)
| –ü–∞—Ä–∞–º–µ—Ç—Ä | –î–∏–∞–ø–∞–∑–æ–Ω | –ó–Ω–∞—á–µ–Ω–∏–µ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é | –í–∞–ª–∏–¥–∞—Ü–∏—è | –ö–æ–¥ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è |
|----------|----------|----------------------|-----------|----------------|
| `ema_fast_len` | ‚â•1 | 12 | `ema_fast_len >= 1` | `indicator_strategy.py:153` |
| `ema_slow_len` | ‚â•1 | 26 | `ema_slow_len >= 1` | `indicator_strategy.py:154` |

‚úÖ **–ü—Ä–æ–≤–µ—Ä–µ–Ω–æ:** –í–∞–ª–∏–¥–∞—Ü–∏—è —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ (configs.py:148-151)
‚úÖ **–ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ:** –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã –ø–µ—Ä–µ—Å—á–∏—Ç—ã–≤–∞—é—Ç—Å—è –Ω–∞ –∫–∞–∂–¥–æ–º –±–∞—Ä–µ —Å —É–∫–∞–∑–∞–Ω–Ω—ã–º–∏ –ø–µ—Ä–∏–æ–¥–∞–º–∏
‚ö†Ô∏è **–í–∞–∂–Ω–æ:** –£–≤–µ–ª–∏—á–µ–Ω–∏–µ –ø–µ—Ä–∏–æ–¥–æ–≤ –¥–µ–ª–∞–µ—Ç —Å—Ç—Ä–∞—Ç–µ–≥–∏—é –º–µ–Ω–µ–µ —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ–π –∫ —à—É–º—É, –Ω–æ –∑–∞–º–µ–¥–ª—è–µ—Ç —Ä–µ–∞–∫—Ü–∏—é

##### B.2 RSI (Relative Strength Index)
| –ü–∞—Ä–∞–º–µ—Ç—Ä | –î–∏–∞–ø–∞–∑–æ–Ω | –ó–Ω–∞—á–µ–Ω–∏–µ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é | –í–∞–ª–∏–¥–∞—Ü–∏—è |
|----------|----------|----------------------|-----------|
| `rsi_len` | ‚â•1 | 14 | `rsi_len >= 1` |
| `rsi_ovb` | 0-100 | 70 | `0 <= rsi_ovb <= 100` |
| `rsi_ovs` | 0-100 | 30 | `0 <= rsi_ovs <= 100 && rsi_ovs < rsi_ovb` |

‚úÖ **–ü—Ä–æ–≤–µ—Ä–µ–Ω–æ:** –í–∞–ª–∏–¥–∞—Ü–∏—è –ø–æ—Ä–æ–≥–æ–≤ –ø–µ—Ä–µ–∫—É–ø–ª–µ–Ω–Ω–æ—Å—Ç–∏/–ø–µ—Ä–µ–ø—Ä–æ–¥–∞–Ω–Ω–æ—Å—Ç–∏ (configs.py:137-145)
‚úÖ **–ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ:** RSI —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è –≤ `indicator_strategy.py:161`

##### B.3 Bollinger Bands
| –ü–∞—Ä–∞–º–µ—Ç—Ä | –î–∏–∞–ø–∞–∑–æ–Ω | –ó–Ω–∞—á–µ–Ω–∏–µ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é | –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ |
|----------|----------|----------------------|-----------|
| `bb_len` | ‚â•1 | 20 | –ü–µ—Ä–∏–æ–¥ —Å–∫–æ–ª—å–∑—è—â–µ–π —Å—Ä–µ–¥–Ω–µ–π |
| `bb_mult` | >0 | 2.0 | –ú–Ω–æ–∂–∏—Ç–µ–ª—å —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–≥–æ –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏—è |

‚úÖ **–ü—Ä–æ–≤–µ—Ä–µ–Ω–æ:** Bollinger Bands –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞—é—Ç—Å—è (indicator_strategy.py:164-175)

##### B.4 ATR (Average True Range)
| –ü–∞—Ä–∞–º–µ—Ç—Ä | –î–∏–∞–ø–∞–∑–æ–Ω | –ó–Ω–∞—á–µ–Ω–∏–µ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é |
|----------|----------|----------------------|
| `atr_len` | ‚â•1 | 14 |

‚úÖ **–ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ:** ATR –≤—ã—á–∏—Å–ª—è–µ—Ç—Å—è –≤ `indicator_strategy.py:178-180`

##### B.5 Volume Filter
| –ü–∞—Ä–∞–º–µ—Ç—Ä | –î–∏–∞–ø–∞–∑–æ–Ω | –ó–Ω–∞—á–µ–Ω–∏–µ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é | –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ |
|----------|----------|----------------------|-----------|
| `vol_ma_len` | ‚â•1 | 21 | –ü–µ—Ä–∏–æ–¥ MA –æ–±—ä—ë–º–∞ |
| `vol_mult` | ‚â•0 | 1.0 | –ú–Ω–æ–∂–∏—Ç–µ–ª—å –¥–ª—è —Ñ–∏–ª—å—Ç—Ä–∞ –æ–±—ä—ë–º–∞ |

‚úÖ **–ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ:** `indicator_strategy.py:183-189`

---

#### **C. Risk / Money Management**

##### C.1 Position Sizing
| –ü–∞—Ä–∞–º–µ—Ç—Ä | –î–∏–∞–ø–∞–∑–æ–Ω | –ó–Ω–∞—á–µ–Ω–∏–µ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é | –í–∞–ª–∏–¥–∞—Ü–∏—è | –ö–æ–¥ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è |
|----------|----------|----------------------|-----------|----------------|
| `base_position_pct` | 0-100 | 10.0 | `0 < base_position_pct <= 100` | `indicator_strategy.py:318-320` |
| `pyramiding` | ‚â•1 | 1 | `pyramiding >= 1` | `indicator_strategy.py:267` |
| `use_martingale` | bool | False | - | `indicator_strategy.py:296-298` |
| `martingale_mult` | ‚â•1.0 | 1.5 | `martingale_mult >= 1.0` if use_martingale | `indicator_strategy.py:297` |
| `max_position_size` | 0-1 | 0.25 | `0 < max_position_size <= 1.0` | `indicator_strategy.py:302` |

‚úÖ **–ü—Ä–æ–≤–µ—Ä–µ–Ω–æ:** –í—Å–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Ä–∞–∑–º–µ—Ä–æ–º –ø–æ–∑–∏—Ü–∏–∏ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –ø—Ä–∏–º–µ–Ω—è—é—Ç—Å—è
‚úÖ **–í–∞–ª–∏–¥–∞—Ü–∏—è:** –ó–∞—â–∏—Ç–∞ –æ—Ç –ø—Ä–µ–≤—ã—à–µ–Ω–∏—è –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–≥–æ —Ä–∞–∑–º–µ—Ä–∞ –ø–æ–∑–∏—Ü–∏–∏ (HIGH-1 fix)
‚ö†Ô∏è **–ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ:** –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–∏ —Ä–∞–∑–º–µ—Ä–µ –ø–æ–∑–∏—Ü–∏–∏ >20% (indicator_strategy.py:305-311)

##### C.2 Take Profit / Stop Loss
| –ü–∞—Ä–∞–º–µ—Ç—Ä | –î–∏–∞–ø–∞–∑–æ–Ω | –ó–Ω–∞—á–µ–Ω–∏–µ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é | –í–∞–ª–∏–¥–∞—Ü–∏—è |
|----------|----------|----------------------|-----------|
| `use_tp_sl` | bool | False | - |
| `tp_long_pct` | >0 | 2.0 | `tp_long_pct > 0` if use_tp_sl |
| `sl_long_pct` | >0 | 2.0 | `sl_long_pct > 0` if use_tp_sl |
| `tp_short_pct` | >0 | 2.0 | `tp_short_pct > 0` if use_tp_sl |
| `sl_short_pct` | >0 | 2.0 | `sl_short_pct > 0` if use_tp_sl |

‚úÖ **–ü—Ä–æ–≤–µ—Ä–µ–Ω–æ:** TP/SL –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è –Ω–∞ –∫–∞–∂–¥–æ–º –±–∞—Ä–µ **–¥–æ** —Å–∏–≥–Ω–∞–ª–æ–≤ –≤—Ö–æ–¥–∞ (indicator_strategy.py:110-113)
‚úÖ **–ê–ª–≥–æ—Ä–∏—Ç–º:** SL –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è –ø–µ—Ä–≤—ã–º (–∫–æ–Ω—Å–µ—Ä–≤–∞—Ç–∏–≤–Ω—ã–π –ø–æ–¥—Ö–æ–¥), –∑–∞—Ç–µ–º TP (indicator_strategy.py:347-360)
‚úÖ **–ü–æ–¥–¥–µ—Ä–∂–∫–∞ –ø–∏—Ä–∞–º–∏–¥–∏–Ω–≥–∞:** –£—Ä–æ–≤–Ω–∏ TP/SL –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ—Å—á–∏—Ç—ã–≤–∞—é—Ç—Å—è –Ω–∞ –æ—Å–Ω–æ–≤–µ —Å—Ä–µ–¥–Ω–µ–π —Ü–µ–Ω—ã –≤—Ö–æ–¥–∞

---

#### **D. Time Filter (–í—Ä–µ–º–µ–Ω–Ω–æ–π —Ñ–∏–ª—å—Ç—Ä)**
| –ü–∞—Ä–∞–º–µ—Ç—Ä | –î–∏–∞–ø–∞–∑–æ–Ω | –ó–Ω–∞—á–µ–Ω–∏–µ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é | –í–∞–ª–∏–¥–∞—Ü–∏—è |
|----------|----------|----------------------|-----------|
| `time_filter_enabled` | bool | False | - |
| `time_filter_start_hour` | 0-23 | 0 | `0 <= start_hour <= 23` |
| `time_filter_end_hour` | 0-23 | 23 | `0 <= end_hour <= 23` |

‚úÖ **–ü—Ä–æ–≤–µ—Ä–µ–Ω–æ:** –í—Ä–µ–º–µ–Ω–Ω–æ–π —Ñ–∏–ª—å—Ç—Ä –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è (indicator_strategy.py:125-127, 384-401)
‚úÖ **Wrap-around:** –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è –ø–µ—Ä–µ—Ö–æ–¥ —á–µ—Ä–µ–∑ –ø–æ–ª–Ω–æ—á—å (–Ω–∞–ø—Ä–∏–º–µ—Ä, 22:00-06:00)

---

#### **E. LLM Parameters (–¥–ª—è —Ä–µ–∂–∏–º–æ–≤ hybrid/llm_only)**
| –ü–∞—Ä–∞–º–µ—Ç—Ä | –î–∏–∞–ø–∞–∑–æ–Ω | –ó–Ω–∞—á–µ–Ω–∏–µ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é | –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ |
|----------|----------|----------------------|-----------|
| `k_max` | ‚â•1.0 | 2.0 | –ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π –º–Ω–æ–∂–∏—Ç–µ–ª—å LLM |
| `llm_horizon_hours` | ‚â•1 | 24 | –ì–æ—Ä–∏–∑–æ–Ω—Ç –ø—Ä–æ–≥–Ω–æ–∑–∞ |
| `llm_min_prob_edge` | 0-0.5 | 0.55 | –ú–∏–Ω–∏–º–∞–ª—å–Ω–æ–µ –ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–æ –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç–∏ |
| `llm_min_trend_strength` | 0-1 | 0.6 | –ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è —Å–∏–ª–∞ —Ç—Ä–µ–Ω–¥–∞ |
| `llm_refresh_interval_bars` | ‚â•1 | 60 | –ò–Ω—Ç–µ—Ä–≤–∞–ª –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è LLM |

‚úÖ **–ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ:** –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –≤ `live_service.py:826-849` –¥–ª—è LLMRegimeWrappedStrategy

---

## 3. –ú–µ—Ö–∞–Ω–∏–∑–º –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤

### 3.1 –£—Ä–æ–≤–Ω–∏ –≤–∞–ª–∏–¥–∞—Ü–∏–∏

#### **Level 1: Client-Side (HTML)**
üìÅ `llm_trading_system/api/templates/strategy_form.html`

```html
<input type="number" name="ema_fast_len" min="1" required>
<input type="number" name="rsi_ovb" min="0" max="100" required>
```

‚úÖ **–ë–∞–∑–æ–≤–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è:** min, max, required, step
‚ö†Ô∏è **–û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ:** –ù–µ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –ª–æ–≥–∏—á–µ—Å–∫–∏–µ —Å–≤—è–∑–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, rsi_ovs < rsi_ovb)

---

#### **Level 2: API Layer (FastAPI)**
üìÅ `llm_trading_system/api/ui_routes.py:481-611`

```python
def ui_save_strategy(
    ema_fast_len: int = Form(...),
    ema_slow_len: int = Form(...),
    # ... –¥—Ä—É–≥–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã
):
    # –ü–∞—Ä—Å–∏–Ω–≥ JSON –ø—Ä–∞–≤–∏–ª
    try:
        long_entry = json.loads(rules_long_entry)
        # ...
    except json.JSONDecodeError as e:
        raise HTTPException(status_code=400, detail=f"Invalid rules JSON: {e}")

    # –ü–æ—Å—Ç—Ä–æ–µ–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥–∞
    config = {
        "strategy_type": strategy_type,
        "mode": mode,
        "ema_fast_len": ema_fast_len,
        # ...
    }

    # –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ (–≤–∞–ª–∏–¥–∞—Ü–∏—è –Ω–∞ —Å–ª–µ–¥—É—é—â–µ–º —É—Ä–æ–≤–Ω–µ)
    storage.save_config(actual_name, config)
```

‚úÖ **–ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–∏–ø–æ–≤:** FastAPI –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤–∞–ª–∏–¥–∏—Ä—É–µ—Ç —Ç–∏–ø—ã –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤
‚úÖ **–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫:** JSON –ø–∞—Ä—Å–∏–Ω–≥ –ø—Ä–∞–≤–∏–ª —Å –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–æ–π –æ—à–∏–±–æ–∫
‚ö†Ô∏è **–ü—Ä–æ–ø—É—â–µ–Ω–∞ –≤–∞–ª–∏–¥–∞—Ü–∏—è:** –õ–æ–≥–∏—á–µ—Å–∫–∏–µ —Å–≤—è–∑–∏ –ø—Ä–æ–≤–µ—Ä—è—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –Ω–∞ —Å–ª–µ–¥—É—é—â–µ–º —É—Ä–æ–≤–Ω–µ

---

#### **Level 3: Configuration Layer (Pydantic/Dataclass)**
üìÅ `llm_trading_system/strategies/configs.py:84-162`

```python
@dataclass
class IndicatorStrategyConfig:
    # ... –ø–∞—Ä–∞–º–µ—Ç—Ä—ã ...

    def __post_init__(self) -> None:
        """Validate configuration parameters."""
        # –í–∞–ª–∏–¥–∞—Ü–∏—è pyramiding
        if self.pyramiding < 1:
            raise ValueError(f"pyramiding must be >= 1, got {self.pyramiding}")

        # –í–∞–ª–∏–¥–∞—Ü–∏—è RSI thresholds
        if self.rsi_ovs >= self.rsi_ovb:
            raise ValueError(
                f"rsi_ovs must be < rsi_ovb, got ovs={self.rsi_ovs}, ovb={self.rsi_ovb}"
            )

        # –í–∞–ª–∏–¥–∞—Ü–∏—è –±–∞–∑–æ–≤–æ–≥–æ —Ä–∞–∑–º–µ—Ä–∞
        if self.base_size <= 0 or self.base_size > 1.0:
            raise ValueError(f"base_size must be in (0, 1], got {self.base_size}")

        # ... –æ—Å—Ç–∞–ª—å–Ω—ã–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ ...
```

‚úÖ **–ö–æ–º–ø–ª–µ–∫—Å–Ω–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è:** –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –ª–æ–≥–∏—á–µ—Å–∫–∏–µ —Å–≤—è–∑–∏ –º–µ–∂–¥—É –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏
‚úÖ **–ó–∞—â–∏—Ç–∞ –æ—Ç overflow:** –ü—Ä–æ–≤–µ—Ä–∫–∏ –≥—Ä–∞–Ω–∏—Ü –¥–ª—è –≤—Å–µ—Ö —á–∏—Å–ª–æ–≤—ã—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤
‚úÖ **–°–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã–µ –ø—Ä–æ–≤–µ—Ä–∫–∏:** RSI ovs < ovb, TP/SL > 0, time_filter —á–∞—Å—ã 0-23
‚ö†Ô∏è **–ú–æ–º–µ–Ω—Ç –≤–∞–ª–∏–¥–∞—Ü–∏–∏:** –ü—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –æ–±—ä–µ–∫—Ç–∞ –∫–æ–Ω—Ñ–∏–≥–∞ (–º–æ–∂–µ—Ç –±—ã—Ç—å –ø–æ–∑–¥–Ω–æ –¥–ª—è API)

---

### 3.2 –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ–≤–µ—Ä–∫–∏

#### ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

1. **Martingale Step Limit** (configs.py:59)
   ```python
   max_martingale_step: int = 10  # –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏–µ –≤–∑—Ä—ã–≤–Ω–æ–≥–æ —Ä–æ—Å—Ç–∞
   ```

2. **Max Position Size Cap** (configs.py:60, indicator_strategy.py:302)
   ```python
   max_position_size: float = 0.25  # –ú–∞–∫—Å–∏–º—É–º 25% –∫–∞–ø–∏—Ç–∞–ª–∞
   size = min(size, self.config.max_position_size)
   ```

3. **Large Position Warning** (indicator_strategy.py:305-311)
   ```python
   if size > 0.20:  # –ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ –ø—Ä–∏ >20%
       logger.warning(f"Large position size: {size:.2%}")
   ```

4. **Bar Data Validation** (indicator_strategy.py:403-433)
   - –ü—Ä–æ–≤–µ—Ä–∫–∞ NaN/Inf
   - –ü—Ä–æ–≤–µ—Ä–∫–∞ OHLC —Å–æ–æ—Ç–Ω–æ—à–µ–Ω–∏–π (high ‚â• low, open/close –º–µ–∂–¥—É high/low)
   - –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω—ã—Ö —Ü–µ–Ω –∏ –Ω–µ–æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω–æ–≥–æ –æ–±—ä–µ–º–∞

---

## 4. –ü–æ—Ç–æ–∫ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤

### 4.1 –°—Ü–µ–Ω–∞—Ä–∏–π 1: –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏ (–ø–æ–ª–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ)

```
USER: –ù–∞–∂–∏–º–∞–µ—Ç "Save Strategy"
  ‚Üì
UI: POST /ui/strategies/{name}/save
  ‚Üì
API: ui_save_strategy() [ui_routes.py:481-611]
  ‚îú‚îÄ –ü—Ä–æ–≤–µ—Ä–∫–∞ CSRF —Ç–æ–∫–µ–Ω–∞
  ‚îú‚îÄ –°–±–æ—Ä –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –∏–∑ Form
  ‚îú‚îÄ –ü–∞—Ä—Å–∏–Ω–≥ JSON –ø—Ä–∞–≤–∏–ª
  ‚îî‚îÄ –ü–æ—Å—Ç—Ä–æ–µ–Ω–∏–µ config dict
  ‚Üì
Storage: save_config(name, config) [strategies/storage.py]
  ‚îî‚îÄ –ó–∞–ø–∏—Å—å –≤ JSON —Ñ–∞–π–ª
  ‚Üì
RESULT: Redirect to /ui/strategies/{name}/edit (303)
```

‚úÖ **CSRF –∑–∞—â–∏—Ç–∞:** –í—Å–µ –∑–∞–ø—Ä–æ—Å—ã –∑–∞—â–∏—â–µ–Ω—ã –æ—Ç CSRF –∞—Ç–∞–∫
‚úÖ **–ü–µ—Ä—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å:** –ü–∞—Ä–∞–º–µ—Ç—Ä—ã —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ JSON —Ñ–∞–π–ª
‚úÖ **–ê—Ç–æ–º–∞—Ä–Ω–æ—Å—Ç—å:** –ó–∞–ø–∏—Å—å –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è —Ü–µ–ª–∏–∫–æ–º –∏–ª–∏ –æ—Ç–∫–∞—Ç—ã–≤–∞–µ—Ç—Å—è –ø—Ä–∏ –æ—à–∏–±–∫–µ

---

### 4.2 –°—Ü–µ–Ω–∞—Ä–∏–π 2: –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–π –ø–µ—Ä–µ—Å—á–µ—Ç (–±–µ–∑ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è)

```
USER: –ò–∑–º–µ–Ω—è–µ—Ç –ø–∞—Ä–∞–º–µ—Ç—Ä –≤ UI ‚Üí –Ω–∞–∂–∏–º–∞–µ—Ç "Recalculate"
  ‚Üì
UI: POST /ui/strategies/{name}/recalculate (JSON body)
  ‚Üì
API: ui_recalculate_backtest() [ui_routes.py:1414-1529]
  ‚îú‚îÄ –ü—Ä–æ–≤–µ—Ä–∫–∞ CSRF —Ç–æ–∫–µ–Ω–∞
  ‚îú‚îÄ –ü–æ–ª—É—á–µ–Ω–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –∏–∑ JSON body
  ‚îú‚îÄ –ü–æ–ª—É—á–µ–Ω–∏–µ data_path –∏–∑ –∫—ç—à–∞ –ø—Ä–µ–¥—ã–¥—É—â–µ–≥–æ –±—ç–∫—Ç–µ—Å—Ç–∞
  ‚îú‚îÄ –ó–∞–≥—Ä—É–∑–∫–∞ base config –∏ merge —Å –Ω–æ–≤—ã–º–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏
  ‚îî‚îÄ config.update({...}) (–ë–ï–ó —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –Ω–∞ –¥–∏—Å–∫!)
  ‚Üì
Backtest: run_backtest_from_config_dict() [backtest_service.py:13-150]
  ‚îú‚îÄ –°–æ–∑–¥–∞–Ω–∏–µ IndicatorStrategyConfig.from_dict(config)
  ‚îÇ   ‚îî‚îÄ –í–∞–ª–∏–¥–∞—Ü–∏—è –≤ __post_init__()
  ‚îú‚îÄ –°–æ–∑–¥–∞–Ω–∏–µ —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏ —á–µ—Ä–µ–∑ factory
  ‚îÇ   ‚îî‚îÄ create_strategy_from_config(config) [factory.py:15-88]
  ‚îÇ       ‚îî‚îÄ IndicatorStrategy(config, rules)
  ‚îú‚îÄ –ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö –∏–∑ CSV
  ‚îî‚îÄ –ó–∞–ø—É—Å–∫ –±—ç–∫—Ç–µ—Å—Ç–µ—Ä–∞
  ‚Üì
Strategy Execution: on_bar() –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –±–∞—Ä–∞
  ‚îú‚îÄ _compute_indicators() —Å –Ω–æ–≤—ã–º–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏
  ‚îú‚îÄ evaluate_rules() —Å –Ω–æ–≤—ã–º–∏ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–∞–º–∏
  ‚îî‚îÄ _generate_order() —Å –Ω–æ–≤—ã–º–∏ –ø—Ä–∞–≤–∏–ª–∞–º–∏ –ø–æ–∑–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è
  ‚Üì
API: –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫—ç—à–∞ —Å –Ω–æ–≤—ã–º–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º–∏
  ‚îî‚îÄ _backtest_cache[name] = {summary, data_path, config}
  ‚Üì
RESULT: JSON response —Å –Ω–æ–≤–æ–π summary (—Å–µ—Ä–∏–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ Trade –æ–±—ä–µ–∫—Ç—ã)
```

‚úÖ **–ò–∑–æ–ª—è—Ü–∏—è:** –ò–∑–º–µ–Ω–µ–Ω–∏—è –Ω–µ –∑–∞—Ç—Ä–∞–≥–∏–≤–∞—é—Ç —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã–π –∫–æ–Ω—Ñ–∏–≥
‚úÖ **–ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ:** –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –∫—ç—à–∏—Ä—É—é—Ç—Å—è –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞ –∫ –≥—Ä–∞—Ñ–∏–∫–∞–º
‚úÖ **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å:** –í–∞–ª–∏–¥–∞—Ü–∏—è –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –ø–µ—Ä–µ–¥ –∑–∞–ø—É—Å–∫–æ–º –±—ç–∫—Ç–µ—Å—Ç–∞

---

### 4.3 –°—Ü–µ–Ω–∞—Ä–∏–π 3: –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –ø–æ—Å–ª–µ –ø–µ—Ä–µ—Å—á–µ—Ç–∞

```
USER: –ü–æ—Å–ª–µ –ø–µ—Ä–µ—Å—á–µ—Ç–∞ –Ω–∞–∂–∏–º–∞–µ—Ç "Save Parameters"
  ‚Üì
UI: POST /ui/strategies/{name}/save-params (JSON body)
  ‚Üì
API: ui_save_strategy_params() [ui_routes.py:1532-1621]
  ‚îú‚îÄ –ü—Ä–æ–≤–µ—Ä–∫–∞ CSRF —Ç–æ–∫–µ–Ω–∞
  ‚îú‚îÄ –ü–æ–ª—É—á–µ–Ω–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –∏–∑ JSON body
  ‚îú‚îÄ –ó–∞–≥—Ä—É–∑–∫–∞ base config
  ‚îú‚îÄ config.update({...})
  ‚îî‚îÄ storage.save_config(name, config) ‚Üí –∑–∞–ø–∏—Å—å –Ω–∞ –¥–∏—Å–∫
  ‚Üì
RESULT: JSON response {"success": true}
```

‚úÖ **–î–≤—É—Ö—ç—Ç–∞–ø–Ω—ã–π workflow:** –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–∏–¥–∏—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç –ø–µ—Ä–µ–¥ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º
‚úÖ **–û—Ç–∫–∞—Ç:** –ú–æ–∂–Ω–æ –æ—Ç–º–µ–Ω–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è, –Ω–µ —Å–æ—Ö—Ä–∞–Ω—è—è

---

## 5. –í–ª–∏—è–Ω–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –Ω–∞ —Ç–æ—Ä–≥–æ–≤—É—é –ª–æ–≥–∏–∫—É

### 5.1 Indicator Parameters ‚Üí Trading Signals

#### **–ü–æ—Ç–æ–∫ —Ä–∞—Å—á–µ—Ç–∞ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–æ–≤**
üìÅ `indicator_strategy.py:135-202`

```python
def _compute_indicators(self, bar: Bar) -> dict[str, float | None]:
    closes_list = list(self.closes)  # –ë—É—Ñ–µ—Ä –ø–æ—Å–ª–µ–¥–Ω–∏—Ö N —Å–≤–µ—á–µ–π

    # EMA —Ä–∞—Å—á–µ—Ç —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤
    indicators["ema_fast"] = ema(closes_list, self.config.ema_fast_len)
    indicators["ema_slow"] = ema(closes_list, self.config.ema_slow_len)

    # RSI —Å –∑–∞–¥–∞–Ω–Ω—ã–º –ø–µ—Ä–∏–æ–¥–æ–º
    indicators["rsi"] = rsi(closes_list, self.config.rsi_len)

    # Bollinger Bands —Å –∑–∞–¥–∞–Ω–Ω—ã–º –ø–µ—Ä–∏–æ–¥–æ–º –∏ –º–Ω–æ–∂–∏—Ç–µ–ª–µ–º
    bb_middle, bb_upper, bb_lower = bollinger(
        closes_list, self.config.bb_len, self.config.bb_mult
    )

    # ... –æ—Å—Ç–∞–ª—å–Ω—ã–µ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã
    return indicators
```

**–í–ª–∏—è–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π:**
- ‚úÖ `ema_fast_len: 5 ‚Üí 10`: –ë–æ–ª–µ–µ –ø–ª–∞–≤–Ω–∞—è –±—ã—Å—Ç—Ä–∞—è EMA ‚Üí –º–µ–Ω—å—à–µ –ª–æ–∂–Ω—ã—Ö —Å–∏–≥–Ω–∞–ª–æ–≤
- ‚úÖ `bb_mult: 2.0 ‚Üí 3.0`: –ë–æ–ª–µ–µ —à–∏—Ä–æ–∫–∏–µ –ø–æ–ª–æ—Å—ã ‚Üí –º–µ–Ω—å—à–µ –∫–∞—Å–∞–Ω–∏–π –≥—Ä–∞–Ω–∏—Ü
- ‚úÖ `rsi_len: 14 ‚Üí 21`: –ë–æ–ª–µ–µ —Å–≥–ª–∞–∂–µ–Ω–Ω—ã–π RSI ‚Üí –º–µ–Ω—å—à–µ –∫–æ–ª–µ–±–∞–Ω–∏–π

---

### 5.2 Position Sizing Parameters ‚Üí Order Size

#### **–ü–æ—Ç–æ–∫ —Ä–∞—Å—á–µ—Ç–∞ —Ä–∞–∑–º–µ—Ä–∞ –ø–æ–∑–∏—Ü–∏–∏**
üìÅ `indicator_strategy.py:284-320`

```python
def _calculate_position_size(self) -> float:
    # –®–∞–≥ –º–∞—Ä—Ç–∏–Ω–≥–µ–π–ª–∞ = –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–∫—Ä—ã—Ç—ã—Ö —Å–¥–µ–ª–æ–∫
    step = min(self._closed_trades_count, self.config.max_martingale_step)

    # –ë–∞–∑–æ–≤–∞—è –¥–æ–ª—è –∫–∞–ø–∏—Ç–∞–ª–∞
    base_fraction = self._base_position_fraction()  # base_position_pct / 100

    # –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –º–∞—Ä—Ç–∏–Ω–≥–µ–π–ª–∞ (–µ—Å–ª–∏ –≤–∫–ª—é—á–µ–Ω)
    if self.config.use_martingale:
        size = base_fraction * (self.config.martingale_mult ** step)
    else:
        size = base_fraction

    # –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–≥–æ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è
    size = min(size, self.config.max_position_size)

    return min(size, 1.0)  # –§–∏–Ω–∞–ª—å–Ω–æ–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ 100%
```

**–ü—Ä–∏–º–µ—Ä—ã –≤–ª–∏—è–Ω–∏—è:**

| base_position_pct | martingale_mult | –†–∞–∑–º–µ—Ä—ã —Å–¥–µ–ª–æ–∫ (%) |
|-------------------|-----------------|-------------------|
| 10% | 1.0 (off) | 10, 10, 10, 10, ... |
| 10% | 1.5 | 10, 15, 22.5, 33.8 (cap 25), ... |
| 20% | 1.5 | 20, 25 (cap), 25, 25, ... |

‚úÖ **–ó–∞—â–∏—Ç–∞ –æ—Ç blowup:** –í—Å–µ–≥–¥–∞ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–æ max_position_size (25% –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)

---

### 5.3 TP/SL Parameters ‚Üí Exit Timing

#### **–ü—Ä–æ–≤–µ—Ä–∫–∞ TP/SL –Ω–∞ –∫–∞–∂–¥–æ–º –±–∞—Ä–µ**
üìÅ `indicator_strategy.py:322-362`

```python
def _check_tp_sl_hit(self, bar: Bar, account: AccountState) -> float | None:
    if self._current_side == "long":
        tp_price = account.entry_price * (1 + self.config.tp_long_pct / 100)
        sl_price = account.entry_price * (1 - self.config.sl_long_pct / 100)

        # SL –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è –ø–µ—Ä–≤—ã–º (–∫–æ–Ω—Å–µ—Ä–≤–∞—Ç–∏–≤–Ω–æ)
        if bar.low <= sl_price:
            return sl_price
        if bar.high >= tp_price:
            return tp_price
    # ... –∞–Ω–∞–ª–æ–≥–∏—á–Ω–æ –¥–ª—è short
```

**–í–ª–∏—è–Ω–∏–µ:**
- ‚úÖ `tp_long_pct: 2% ‚Üí 5%`: –¶–µ–ª–∏ –¥–∞–ª—å—à–µ ‚Üí –º–µ–Ω—å—à–µ –∑–∞–∫—Ä—ã—Ç–∏–π, –Ω–æ –±–æ–ª—å—à–µ –ø—Ä–∏–±—ã–ª—å
- ‚úÖ `sl_long_pct: 2% ‚Üí 1%`: –ë–æ–ª–µ–µ –∞–≥—Ä–µ—Å—Å–∏–≤–Ω—ã–π —Å—Ç–æ–ø ‚Üí –±–æ–ª—å—à–µ –∑–∞–∫—Ä—ã—Ç–∏–π –ø–æ —Å—Ç–æ–ø—É

**‚ö†Ô∏è –í–ê–ñ–ù–û:** TP/SL –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è **–î–û** —Å–∏–≥–Ω–∞–ª–æ–≤ –≤—Ö–æ–¥–∞ (—Å—Ç—Ä–æ–∫–∞ 110-113), —á—Ç–æ –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç –ø–µ—Ä–µ—Ç–æ—Ä–≥–æ–≤–ª—é –≤ —Ç–æ–º –∂–µ –±–∞—Ä–µ.

---

### 5.4 Time Filter ‚Üí Trading Hours

#### **–ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–Ω–æ–≥–æ —Ñ–∏–ª—å—Ç—Ä–∞**
üìÅ `indicator_strategy.py:384-401`

```python
def _is_in_time_window(self, bar: Bar) -> bool:
    hour = bar.timestamp.hour
    start = self.config.time_filter_start_hour
    end = self.config.time_filter_end_hour

    if start <= end:
        return start <= hour <= end  # –û–±—ã—á–Ω—ã–π –¥–∏–∞–ø–∞–∑–æ–Ω (–Ω–∞–ø—Ä–∏–º–µ—Ä, 9-17)
    else:
        return hour >= start or hour <= end  # Wrap-around (–Ω–∞–ø—Ä–∏–º–µ—Ä, 22-6)
```

**–ü—Ä–∏–º–µ—Ä—ã:**
- `start_hour=9, end_hour=17`: –¢–æ—Ä–≥–æ–≤–ª—è —Ç–æ–ª—å–∫–æ —Å 9:00 –¥–æ 17:00
- `start_hour=22, end_hour=6`: –¢–æ—Ä–≥–æ–≤–ª—è –Ω–æ—á—å—é (—Å 22:00 –¥–æ 6:00)

‚úÖ **–ü—Ä–∞–≤–∏–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ wrap-around**: –ö–æ—Ä—Ä–µ–∫—Ç–Ω–æ —Ä–∞–±–æ—Ç–∞–µ—Ç —á–µ—Ä–µ–∑ –ø–æ–ª–Ω–æ—á—å

---

## 6. –ù–∞–π–¥–µ–Ω–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã –∏ —Ä–∏—Å–∫–∏

### 6.1 –û—Ç—Å—É—Ç—Å—Ç–≤—É—é—â–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è –Ω–∞ API —É—Ä–æ–≤–Ω–µ

**–ü—Ä–æ–±–ª–µ–º–∞:**
API –Ω–µ –≤–∞–ª–∏–¥–∏—Ä—É–µ—Ç –ª–æ–≥–∏—á–µ—Å–∫–∏–µ —Å–≤—è–∑–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ **–¥–æ** –ø–µ—Ä–µ–¥–∞—á–∏ –≤ IndicatorStrategyConfig.
–ù–∞–ø—Ä–∏–º–µ—Ä, `rsi_ovs >= rsi_ovb` –±—É–¥–µ—Ç –æ—Ç–∫–ª–æ–Ω–µ–Ω–æ —Ç–æ–ª—å–∫–æ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ config, –∞ –Ω–µ –ø—Ä–∏ –ø—Ä–∏–µ–º–µ –∑–∞–ø—Ä–æ—Å–∞.

**–ú–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–µ:** `ui_routes.py:481-611` (ui_save_strategy)

**–†–∏—Å–∫:** –ü–æ–∑–¥–Ω–µ–µ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏–µ –æ—à–∏–±–æ–∫ ‚Üí –ø–ª–æ—Ö–æ–π UX

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:**
```python
# ui_routes.py:ui_save_strategy()

# –ü–æ—Å–ª–µ –ø–∞—Ä—Å–∏–Ω–≥–∞ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤, –ø–µ—Ä–µ–¥ save_config()
if rsi_ovs >= rsi_ovb:
    raise HTTPException(
        status_code=400,
        detail=f"RSI oversold ({rsi_ovs}) must be < overbought ({rsi_ovb})"
    )

if ema_fast_len >= ema_slow_len:
    raise HTTPException(
        status_code=400,
        detail="Fast EMA period must be < Slow EMA period for crossover strategies"
    )
```

---

### 6.2 –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ vol_mult –≤ –≤–∞–ª–∏–¥–∞—Ç–æ—Ä–µ

**–ü—Ä–æ–±–ª–µ–º–∞:**
–ü–∞—Ä–∞–º–µ—Ç—Ä `vol_mult` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∫–∞–∫ –º–Ω–æ–∂–∏—Ç–µ–ª—å –æ–±—ä–µ–º–∞ (indicator_strategy.py:188), –Ω–æ –Ω–µ –∏–º–µ–µ—Ç –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –≤ `IndicatorStrategyConfig.__post_init__()`.

**–†–∏—Å–∫:** –û—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω—ã–µ –∏–ª–∏ NaN –∑–Ω–∞—á–µ–Ω–∏—è –º–æ–≥—É—Ç –ø—Ä–∏–≤–µ—Å—Ç–∏ –∫ –Ω–µ–æ–∂–∏–¥–∞–Ω–Ω–æ–º—É –ø–æ–≤–µ–¥–µ–Ω–∏—é.

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:**
```python
# configs.py:__post_init__()

if self.vol_mult < 0:
    raise ValueError(f"vol_mult must be >= 0, got {self.vol_mult}")
```

---

### 6.3 –ù–µ—è–≤–Ω–∞—è –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å –æ—Ç max_len —Ä–∞—Å—á–µ—Ç–∞

**–ü—Ä–æ–±–ª–µ–º–∞:**
`max_len` –¥–ª—è –±—É—Ñ–µ—Ä–∞ OHLCV —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è –∫–∞–∫ –º–∞–∫—Å–∏–º—É–º –∏–∑ –≤—Å–µ—Ö –ø–µ—Ä–∏–æ–¥–æ–≤ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–æ–≤ (indicator_strategy.py:45-53).
–ü—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ `max_len` –º–æ–∂–µ—Ç –±—ã—Ç—å –Ω–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω—ã–º –¥–ª—è –Ω–æ–≤—ã—Ö –ø–µ—Ä–∏–æ–¥–æ–≤.

**–ú–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–µ:** `indicator_strategy.py:45-53`

**–°—Ü–µ–Ω–∞—Ä–∏–π:**
1. –°—Ç—Ä–∞—Ç–µ–≥–∏—è —Å–æ–∑–¥–∞–Ω–∞ —Å `ema_slow_len=26` ‚Üí `max_len=52` (26*2 –¥–ª—è ADX)
2. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∏–∑–º–µ–Ω—è–µ—Ç `ema_slow_len=100` —á–µ—Ä–µ–∑ recalculate
3. –ë—É—Ñ–µ—Ä `self.closes` –∏–º–µ–µ—Ç `maxlen=52`, –Ω–æ —Ç—Ä–µ–±—É–µ—Ç—Å—è 100

**–†–∏—Å–∫:** –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã –Ω–µ —Å–º–æ–≥—É—Ç —Ä–∞—Å—Å—á–∏—Ç–∞—Ç—å—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ —Å –Ω–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:**
–ü—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ —á–µ—Ä–µ–∑ `ui_recalculate_backtest()` –ø–µ—Ä–µ—Å–æ–∑–¥–∞–≤–∞—Ç—å —Å—Ç—Ä–∞—Ç–µ–≥–∏—é –ø–æ–ª–Ω–æ—Å—Ç—å—é:

```python
# ui_routes.py:ui_recalculate_backtest()

# –°–ï–ô–ß–ê–°: –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Å—É—â–µ—Å—Ç–≤—É—é—â–∞—è —Å—Ç—Ä–∞—Ç–µ–≥–∏—è –∏–∑ –∫—ç—à–∞ (–ø–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω–∞—è –ø—Ä–æ–±–ª–µ–º–∞)
# –î–û–õ–ñ–ù–û –ë–´–¢–¨: –ü–µ—Ä–µ—Å–æ–∑–¥–∞–Ω–∏–µ —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏ —Å –Ω–æ–≤—ã–º–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏

# –£–¥–∞–ª–∏—Ç—å –∫—ç—à —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏ –∏ —Å–æ–∑–¥–∞—Ç—å –Ω–æ–≤—É—é
strategy = create_strategy_from_config(config, llm_client=llm_client)
```

**–°—Ç–∞—Ç—É—Å:** ‚úÖ **–ù–ï –ö–†–ò–¢–ò–ß–ù–û** - –í —Ç–µ–∫—É—â–µ–π —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ `ui_recalculate_backtest()` –∑–∞–ø—É—Å–∫–∞–µ—Ç `run_backtest_from_config_dict()`, –∫–æ—Ç–æ—Ä—ã–π **–°–û–ó–î–ê–ï–¢ –ù–û–í–£–Æ** —Å—Ç—Ä–∞—Ç–µ–≥–∏—é —á–µ—Ä–µ–∑ `create_strategy_from_config()` (backtest_service.py:96), –ø–æ—ç—Ç–æ–º—É —ç—Ç–∞ –ø—Ä–æ–±–ª–µ–º–∞ –Ω–µ –≤–æ–∑–Ω–∏–∫–∞–µ—Ç.

---

### 6.4 –ü–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω–∞—è –≥–æ–Ω–∫–∞ –≤ live_service.py –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤

**–ü—Ä–æ–±–ª–µ–º–∞:**
–ü—Ä–∏ live —Ç–æ—Ä–≥–æ–≤–ª–µ —Å—Ç—Ä–∞—Ç–µ–≥–∏—è —Å–æ–∑–¥–∞–µ—Ç—Å—è –æ–¥–∏–Ω —Ä–∞–∑ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ —Å–µ—Å—Å–∏–∏ (live_service.py:821).
–ò–∑–º–µ–Ω–µ–Ω–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ —á–µ—Ä–µ–∑ UI **–ù–ï** –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è –∫ —É–∂–µ –∑–∞–ø—É—â–µ–Ω–Ω–æ–π live —Å–µ—Å—Å–∏–∏.

**–ú–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–µ:** `live_service.py:743-903` (create_session)

**–†–∏—Å–∫:** –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∏–∑–º–µ–Ω—è–µ—Ç –ø–∞—Ä–∞–º–µ—Ç—Ä—ã, –Ω–æ live —Ç–æ—Ä–≥–æ–≤–ª—è –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å—Ç–∞—Ä—ã–µ.

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:**
1. –î–æ–±–∞–≤–∏—Ç—å –≤ UI –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ: "–ò–∑–º–µ–Ω–µ–Ω–∏—è –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –Ω–µ –≤–ª–∏—è—é—Ç –Ω–∞ –∑–∞–ø—É—â–µ–Ω–Ω—ã–µ live —Å–µ—Å—Å–∏–∏"
2. –î–æ–±–∞–≤–∏—Ç—å API endpoint –¥–ª—è –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞ —Å–µ—Å—Å–∏–∏ —Å –Ω–æ–≤—ã–º–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏:
   ```python
   @router.post("/api/live/sessions/{session_id}/reload_strategy")
   async def reload_strategy(session_id: str, strategy_name: str):
       session = get_session_manager().get_session(session_id)
       if session.status == "running":
           raise HTTPException(400, "Stop session before reloading strategy")

       # –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç—å –∫–æ–Ω—Ñ–∏–≥ –∏ –ø–µ—Ä–µ—Å–æ–∑–¥–∞—Ç—å —Å—Ç—Ä–∞—Ç–µ–≥–∏—é
       # ...
   ```

---

## 7. –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ —É–ª—É—á—à–µ–Ω–∏—é

### 7.1 –ö–æ—Ä–æ—Ç–∫–æ—Å—Ä–æ—á–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è (Quick Wins)

#### 1. –î–æ–±–∞–≤–∏—Ç—å –≤–∞–ª–∏–¥–∞—Ü–∏—é –Ω–∞ API —É—Ä–æ–≤–Ω–µ
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** üî¥ –í–´–°–û–ö–ò–ô
**Effort:** –ù–∏–∑–∫–∏–π (2-4 —á–∞—Å–∞)

```python
# ui_routes.py: –Ω–æ–≤–∞—è —Ñ—É–Ω–∫—Ü–∏—è
def validate_strategy_params(params: dict) -> None:
    """–í–∞–ª–∏–¥–∞—Ü–∏—è –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏ –ø–µ—Ä–µ–¥ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º."""
    rsi_ovs = params.get("rsi_ovs")
    rsi_ovb = params.get("rsi_ovb")

    if rsi_ovs and rsi_ovb and rsi_ovs >= rsi_ovb:
        raise HTTPException(
            status_code=400,
            detail=f"RSI oversold ({rsi_ovs}) must be < overbought ({rsi_ovb})"
        )

    # ... –¥—Ä—É–≥–∏–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ ...

# –í—ã–∑–æ–≤ –≤ ui_save_strategy() –∏ ui_save_strategy_params()
validate_strategy_params(config)
```

---

#### 2. –î–æ–±–∞–≤–∏—Ç—å –≤–∞–ª–∏–¥–∞—Ü–∏—é vol_mult
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** üü° –°–†–ï–î–ù–ò–ô
**Effort:** –û—á–µ–Ω—å –Ω–∏–∑–∫–∏–π (15 –º–∏–Ω—É—Ç)

```python
# configs.py:__post_init__()
if self.vol_mult < 0:
    raise ValueError(f"vol_mult must be >= 0, got {self.vol_mult}")
```

---

#### 3. –£–ª—É—á—à–∏—Ç—å –æ–±—Ä–∞–±–æ—Ç–∫—É –æ—à–∏–±–æ–∫ –≤ UI
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** üü° –°–†–ï–î–ù–ò–ô
**Effort:** –ù–∏–∑–∫–∏–π (2-3 —á–∞—Å–∞)

–î–æ–±–∞–≤–∏—Ç—å JavaScript –≤–∞–ª–∏–¥–∞—Ü–∏—é –≤ `strategy_form.html`:
```javascript
// –ü–µ—Ä–µ–¥ –æ—Ç–ø—Ä–∞–≤–∫–æ–π —Ñ–æ—Ä–º—ã
form.addEventListener('submit', function(e) {
    const rsi_ovs = parseInt(document.getElementById('rsi_ovs').value);
    const rsi_ovb = parseInt(document.getElementById('rsi_ovb').value);

    if (rsi_ovs >= rsi_ovb) {
        e.preventDefault();
        alert('RSI Oversold must be less than RSI Overbought');
        return false;
    }

    // ... –¥—Ä—É–≥–∏–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ ...
});
```

---

### 7.2 –°—Ä–µ–¥–Ω–µ—Å—Ä–æ—á–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è

#### 4. –°–æ–∑–¥–∞—Ç—å ParameterValidator –∫–ª–∞—Å—Å
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** üü¢ –ù–ò–ó–ö–ò–ô
**Effort:** –°—Ä–µ–¥–Ω–∏–π (1 –¥–µ–Ω—å)

–¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞—Ç—å –≤—Å—é –ª–æ–≥–∏–∫—É –≤–∞–ª–∏–¥–∞—Ü–∏–∏:
```python
# llm_trading_system/strategies/validators.py

class ParameterValidator:
    @staticmethod
    def validate_indicator_params(params: dict) -> list[str]:
        """–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å–ø–∏—Å–æ–∫ –æ—à–∏–±–æ–∫ –≤–∞–ª–∏–¥–∞—Ü–∏–∏."""
        errors = []

        if params.get("rsi_ovs", 0) >= params.get("rsi_ovb", 100):
            errors.append("RSI oversold must be < overbought")

        if params.get("ema_fast_len", 0) >= params.get("ema_slow_len", 1):
            errors.append("Fast EMA period must be < Slow EMA period")

        # ... –≤—Å–µ –æ—Å—Ç–∞–ª—å–Ω—ã–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ ...

        return errors

    @staticmethod
    def validate_position_sizing(params: dict) -> list[str]:
        # ...
        pass
```

---

#### 5. –î–æ–±–∞–≤–∏—Ç—å –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è –æ –≤–ª–∏—è–Ω–∏–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** üü¢ –ù–ò–ó–ö–ò–ô
**Effort:** –°—Ä–µ–¥–Ω–∏–π (1-2 –¥–Ω—è)

–î–æ–±–∞–≤–∏—Ç—å tooltips –≤ UI —Å –æ–±—ä—è—Å–Ω–µ–Ω–∏–µ–º –≤–ª–∏—è–Ω–∏—è –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤:
```html
<label for="ema_fast_len">
    EMA Fast Length
    <span class="tooltip" title="Lower values (5-12) react faster to price changes but generate more false signals. Higher values (20-50) are slower but more reliable.">‚ìò</span>
</label>
```

---

#### 6. Live Session Parameter Reload
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** üü° –°–†–ï–î–ù–ò–ô
**Effort:** –í—ã—Å–æ–∫–∏–π (2-3 –¥–Ω—è)

–†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å API –¥–ª—è –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è –Ω–æ–≤—ã—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –∫ –∑–∞–ø—É—â–µ–Ω–Ω–æ–π live —Å–µ—Å—Å–∏–∏:
- –û—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—Ç—å —Ç–µ–∫—É—â—É—é —Å–µ—Å—Å–∏—é
- –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∂–∞—Ç—å —Å—Ç—Ä–∞—Ç–µ–≥–∏—é —Å –Ω–æ–≤—ã–º–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏
- –°–æ—Ö—Ä–∞–Ω—è—Ç—å —Å–æ—Å—Ç–æ—è–Ω–∏–µ –ø–æ–∑–∏—Ü–∏–π –∏ equity
- –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞—Ç—å —Å–µ—Å—Å–∏—é

---

### 7.3 –î–æ–ª–≥–æ—Å—Ä–æ—á–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è

#### 7. Parameter Presets & Templates
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** üü¢ –ù–ò–ó–ö–ò–ô
**Effort:** –í—ã—Å–æ–∫–∏–π (1 –Ω–µ–¥–µ–ª—è)

–î–æ–±–∞–≤–∏—Ç—å —Å–∏—Å—Ç–µ–º—É –ø—Ä–µ—Å–µ—Ç–æ–≤:
- –ê–≥—Ä–µ—Å—Å–∏–≤–Ω–∞—è —Å—Ç—Ä–∞—Ç–µ–≥–∏—è (–≤—ã—Å–æ–∫–∏–π —Ä–∏—Å–∫, –≤—ã—Å–æ–∫–∞—è –¥–æ—Ö–æ–¥–Ω–æ—Å—Ç—å)
- –ö–æ–Ω—Å–µ—Ä–≤–∞—Ç–∏–≤–Ω–∞—è —Å—Ç—Ä–∞—Ç–µ–≥–∏—è (–Ω–∏–∑–∫–∏–π —Ä–∏—Å–∫, —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å)
- –°–∫–∞–ª—å–ø–∏–Ω–≥ (–∫–æ—Ä–æ—Ç–∫–∏–µ –ø–µ—Ä–∏–æ–¥—ã, —á–∞—Å—Ç—ã–µ —Å–¥–µ–ª–∫–∏)
- –ü–æ–∑–∏—Ü–∏–æ–Ω–Ω–∞—è —Ç–æ—Ä–≥–æ–≤–ª—è (–¥–ª–∏–Ω–Ω—ã–µ –ø–µ—Ä–∏–æ–¥—ã, —Ä–µ–¥–∫–∏–µ —Å–¥–µ–ª–∫–∏)

---

#### 8. Parameter Optimization Tool
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** üü¢ –ù–ò–ó–ö–ò–ô
**Effort:** –û—á–µ–Ω—å –≤—ã—Å–æ–∫–∏–π (2-3 –Ω–µ–¥–µ–ª–∏)

–í—Å—Ç—Ä–æ–µ–Ω–Ω–∞—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤:
- Grid search –ø–æ –¥–∏–∞–ø–∞–∑–æ–Ω–∞–º –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤
- Genetic algorithm –¥–ª—è –ø–æ–∏—Å–∫–∞ –æ–ø—Ç–∏–º–∞–ª—å–Ω—ã—Ö –∫–æ–º–±–∏–Ω–∞—Ü–∏–π
- Walk-forward analysis –¥–ª—è –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è overfitting
- –í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏

---

## 8. –¢–µ—Å—Ç–æ–≤–æ–µ –ø–æ–∫—Ä—ã—Ç–∏–µ

### 8.1 –°—É—â–µ—Å—Ç–≤—É—é—â–∏–µ —Ç–µ—Å—Ç—ã

‚úÖ **Indicator Strategy Tests** (`tests/test_indicator_strategy.py`)
- EMA crossover strategy
- RSI oversold/overbought strategy
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –±–∞–∑–æ–≤—ã—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤

‚úÖ **Config Integration Tests** (`tests/test_config_integration.py`)
- –í–∞–ª–∏–¥–∞—Ü–∏—è IndicatorStrategyConfig
- from_dict() –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ

‚úÖ **Backtest Service Tests** (`tests/test_backtest_from_config.py`)
- –ü–æ–ª–Ω—ã–π –ø–æ—Ç–æ–∫ –æ—Ç config dict –¥–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –±—ç–∫—Ç–µ—Å—Ç–∞

### 8.2 –û—Ç—Å—É—Ç—Å—Ç–≤—É—é—â–∏–µ —Ç–µ—Å—Ç—ã

‚ùå **Parameter Validation Tests**
- –¢–µ—Å—Ç—ã –¥–ª—è –≤—Å–µ—Ö –≥—Ä–∞–Ω–∏—á–Ω—ã—Ö —Å–ª—É—á–∞–µ–≤ –≤–∞–ª–∏–¥–∞—Ü–∏–∏
- –¢–µ—Å—Ç—ã –¥–ª—è –ª–æ–≥–∏—á–µ—Å–∫–∏—Ö —Å–≤—è–∑–µ–π –º–µ–∂–¥—É –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏

‚ùå **UI Routes Tests**
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã –¥–ª—è ui_save_strategy()
- –¢–µ—Å—Ç—ã –¥–ª—è ui_recalculate_backtest()
- –¢–µ—Å—Ç—ã –¥–ª—è ui_save_strategy_params()

‚ùå **Live Parameter Update Tests**
- –¢–µ—Å—Ç—ã –¥–ª—è –∏–∑–º–µ–Ω–µ–Ω–∏—è –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –≤ –∑–∞–ø—É—â–µ–Ω–Ω–æ–π live —Å–µ—Å—Å–∏–∏

### 8.3 –†–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–Ω–Ω–æ–µ –ø–æ–∫—Ä—ã—Ç–∏–µ

```python
# tests/test_parameter_validation.py

def test_rsi_thresholds_validation():
    """–¢–µ—Å—Ç: RSI ovs –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å < ovb"""
    with pytest.raises(ValueError, match="rsi_ovs must be < rsi_ovb"):
        IndicatorStrategyConfig(rsi_ovs=70, rsi_ovb=30)

def test_ema_periods_warning():
    """–¢–µ—Å—Ç: –ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ –µ—Å–ª–∏ fast >= slow"""
    # Should work but issue warning
    config = IndicatorStrategyConfig(ema_fast_len=50, ema_slow_len=20)
    # –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ —Å—Ç—Ä–∞—Ç–µ–≥–∏—è –Ω–µ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç —Å–∏–≥–Ω–∞–ª—ã (fast > slow)

def test_position_size_cap():
    """–¢–µ—Å—Ç: –†–∞–∑–º–µ—Ä –ø–æ–∑–∏—Ü–∏–∏ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω max_position_size"""
    config = IndicatorStrategyConfig(
        base_position_pct=30.0,  # 30%
        use_martingale=True,
        martingale_mult=2.0,
        max_position_size=0.25  # 25% cap
    )
    strategy = IndicatorStrategy(config, rules)

    # –°–∏–º—É–ª–∏—Ä–æ–≤–∞—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ –∑–∞–∫—Ä—ã—Ç—ã—Ö —Å–¥–µ–ª–æ–∫
    strategy._closed_trades_count = 3
    size = strategy._calculate_position_size()

    assert size <= 0.25, "Position size –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –æ–≥—Ä–∞–Ω–∏—á–µ–Ω max_position_size"
```

---

## 9. –§–∏–Ω–∞–ª—å–Ω—ã–µ –≤—ã–≤–æ–¥—ã

### ‚úÖ –ß—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç —Ö–æ—Ä–æ—à–æ

1. **–ü–æ–ª–Ω—ã–π –ø–æ—Ç–æ–∫ –¥–∞–Ω–Ω—ã—Ö –æ—Ç UI –¥–æ —Ç–æ—Ä–≥–æ–≤–æ–≥–æ –¥–≤–∏–∂–∫–∞ –∫–æ—Ä—Ä–µ–∫—Ç–µ–Ω**
   - –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –ø—Ä–∞–≤–∏–ª—å–Ω–æ –ø–µ—Ä–µ–¥–∞—é—Ç—Å—è –∏ –ø—Ä–∏–º–µ–Ω—è—é—Ç—Å—è –Ω–∞ –≤—Å–µ—Ö —É—Ä–æ–≤–Ω—è—Ö

2. **–ö–æ–º–ø–ª–µ–∫—Å–Ω–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è –≤ IndicatorStrategyConfig**
   - –í—Å–µ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã
   - –ó–∞—â–∏—Ç–∞ –æ—Ç overflow –∏ –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π

3. **–ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–π –ø–µ—Ä–µ—Å—á–µ—Ç —Ä–∞–±–æ—Ç–∞–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω–æ**
   - –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –∏–∑–º–µ–Ω—è—é—Ç—Å—è –±–µ–∑ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è
   - –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –∫—ç—à–∏—Ä—É—é—Ç—Å—è –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞

4. **–ó–∞—â–∏—Ç–∞ –æ—Ç —Ä–∏—Å–∫–æ–≤ –≤ position sizing**
   - max_position_size cap
   - max_martingale_step limit
   - –ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è –ø—Ä–∏ –±–æ–ª—å—à–∏—Ö –ø–æ–∑–∏—Ü–∏—è—Ö

5. **CSRF –∑–∞—â–∏—Ç–∞ –Ω–∞ –≤—Å–µ—Ö POST —ç–Ω–¥–ø–æ–∏–Ω—Ç–∞—Ö**

---

### ‚ö†Ô∏è –í—ã—è–≤–ª–µ–Ω–Ω—ã–µ –Ω–µ–¥–æ—Å—Ç–∞—Ç–∫–∏

1. **–û—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç –≤–∞–ª–∏–¥–∞—Ü–∏—è –ª–æ–≥–∏—á–µ—Å–∫–∏—Ö —Å–≤—è–∑–µ–π –Ω–∞ API —É—Ä–æ–≤–Ω–µ** (üî¥ HIGH)
   - –û—à–∏–±–∫–∏ –æ–±–Ω–∞—Ä—É–∂–∏–≤–∞—é—Ç—Å—è —Å–ª–∏—à–∫–æ–º –ø–æ–∑–¥–Ω–æ

2. **vol_mult –Ω–µ –≤–∞–ª–∏–¥–∏—Ä—É–µ—Ç—Å—è** (üü° MEDIUM)
   - –ü–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–µ NaN/–æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è

3. **–ù–µ—Ç –ø–æ–¥–¥–µ—Ä–∂–∫–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –≤ live —Å–µ—Å—Å–∏—è—Ö** (üü° MEDIUM)
   - –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –ø–æ–Ω–∏–º–∞–µ—Ç, —á—Ç–æ –∏–∑–º–µ–Ω–µ–Ω–∏—è –Ω–µ –ø—Ä–∏–º–µ–Ω—è—é—Ç—Å—è

4. **–û–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω–∞—è –æ–±—Ä–∞—Ç–Ω–∞—è —Å–≤—è–∑—å –≤ UI** (üü¢ LOW)
   - –ù–µ—Ç –æ–±—ä—è—Å–Ω–µ–Ω–∏–π –≤–ª–∏—è–Ω–∏—è –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤

---

### üìä –û–±—â–∞—è –æ—Ü–µ–Ω–∫–∞

| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç | –°—Ç–∞—Ç—É—Å | –û—Ü–µ–Ω–∫–∞ |
|-----------|--------|--------|
| UI Form | ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç | 8/10 |
| API Validation | ‚ö†Ô∏è –ß–∞—Å—Ç–∏—á–Ω–æ | 6/10 |
| Config Validation | ‚úÖ –û—Ç–ª–∏—á–Ω–æ | 9/10 |
| Strategy Execution | ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç | 9/10 |
| Live Trading | ‚ö†Ô∏è –û–≥—Ä–∞–Ω–∏—á–µ–Ω–æ | 7/10 |
| Tests Coverage | ‚ö†Ô∏è –ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ | 5/10 |
| **–û–ë–©–ê–Ø –û–¶–ï–ù–ö–ê** | ‚úÖ **–°–ò–°–¢–ï–ú–ê –†–ê–ë–û–¢–ê–ï–¢** | **7.5/10** |

---

## 10. –ü–ª–∞–Ω –¥–µ–π—Å—Ç–≤–∏–π

### –§–∞–∑–∞ 1: –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è (1-2 –¥–Ω—è)
- [ ] –î–æ–±–∞–≤–∏—Ç—å –≤–∞–ª–∏–¥–∞—Ü–∏—é –ª–æ–≥–∏—á–µ—Å–∫–∏—Ö —Å–≤—è–∑–µ–π –Ω–∞ API —É—Ä–æ–≤–Ω–µ
- [ ] –î–æ–±–∞–≤–∏—Ç—å –≤–∞–ª–∏–¥–∞—Ü–∏—é vol_mult
- [ ] –î–æ–±–∞–≤–∏—Ç—å –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ –≤ UI –æ live —Å–µ—Å—Å–∏—è—Ö

### –§–∞–∑–∞ 2: –£–ª—É—á—à–µ–Ω–∏–µ UX (3-5 –¥–Ω–µ–π)
- [ ] –î–æ–±–∞–≤–∏—Ç—å JavaScript –≤–∞–ª–∏–¥–∞—Ü–∏—é –≤ —Ñ–æ—Ä–º—É
- [ ] –î–æ–±–∞–≤–∏—Ç—å tooltips —Å –æ–±—ä—è—Å–Ω–µ–Ω–∏—è–º–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤
- [ ] –°–æ–∑–¥–∞—Ç—å ParameterValidator –∫–ª–∞—Å—Å

### –§–∞–∑–∞ 3: –†–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ (2-3 –Ω–µ–¥–µ–ª–∏)
- [ ] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å Parameter Reload –¥–ª—è live —Å–µ—Å—Å–∏–π
- [ ] –î–æ–±–∞–≤–∏—Ç—å Parameter Presets
- [ ] –°–æ–∑–¥–∞—Ç—å Parameter Optimization Tool

### –§–∞–∑–∞ 4: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ (1 –Ω–µ–¥–µ–ª—è)
- [ ] –ù–∞–ø–∏—Å–∞—Ç—å –∫–æ–º–ø–ª–µ–∫—Å–Ω—ã–µ —Ç–µ—Å—Ç—ã –≤–∞–ª–∏–¥–∞—Ü–∏–∏
- [ ] –î–æ–±–∞–≤–∏—Ç—å –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã UI
- [ ] –ü—Ä–æ–≤–µ—Å—Ç–∏ –Ω–∞–≥—Ä—É–∑–æ—á–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

---

## –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ A: –°–ø–∏—Å–æ–∫ —Ñ–∞–π–ª–æ–≤ –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏

| –§–∞–π–ª | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ | –ö—Ä–∏—Ç–∏—á–Ω–æ—Å—Ç—å |
|------|-----------|-------------|
| `llm_trading_system/api/templates/strategy_form.html` | UI —Ñ–æ—Ä–º–∞ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è | üî¥ HIGH |
| `llm_trading_system/api/ui_routes.py` | API –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ | üî¥ HIGH |
| `llm_trading_system/strategies/configs.py` | –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –∏ –≤–∞–ª–∏–¥–∞—Ü–∏—è | üî¥ HIGH |
| `llm_trading_system/strategies/factory.py` | –°–æ–∑–¥–∞–Ω–∏–µ —Å—Ç—Ä–∞—Ç–µ–≥–∏–π | üî¥ HIGH |
| `llm_trading_system/strategies/indicator_strategy.py` | –¢–æ—Ä–≥–æ–≤–∞—è –ª–æ–≥–∏–∫–∞ | üî¥ HIGH |
| `llm_trading_system/engine/backtest_service.py` | –°–µ—Ä–≤–∏—Å –±—ç–∫—Ç–µ—Å—Ç–æ–≤ | üü° MEDIUM |
| `llm_trading_system/engine/live_service.py` | –°–µ—Ä–≤–∏—Å live —Ç–æ—Ä–≥–æ–≤–ª–∏ | üü° MEDIUM |
| `tests/test_indicator_strategy.py` | –¢–µ—Å—Ç—ã —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏ | üü¢ LOW |

---

## –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ B: –ü—Ä–∏–º–µ—Ä—ã –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–π

### –ö–æ–Ω—Å–µ—Ä–≤–∞—Ç–∏–≤–Ω–∞—è —Å—Ç—Ä–∞—Ç–µ–≥–∏—è
```json
{
  "strategy_type": "indicator",
  "mode": "quant_only",
  "symbol": "BTCUSDT",
  "ema_fast_len": 20,
  "ema_slow_len": 50,
  "rsi_len": 21,
  "rsi_ovb": 65,
  "rsi_ovs": 35,
  "base_position_pct": 5.0,
  "pyramiding": 1,
  "use_martingale": false,
  "use_tp_sl": true,
  "tp_long_pct": 3.0,
  "sl_long_pct": 1.5
}
```

### –ê–≥—Ä–µ—Å—Å–∏–≤–Ω–∞—è —Å—Ç—Ä–∞—Ç–µ–≥–∏—è
```json
{
  "strategy_type": "indicator",
  "mode": "quant_only",
  "symbol": "BTCUSDT",
  "ema_fast_len": 5,
  "ema_slow_len": 15,
  "rsi_len": 7,
  "rsi_ovb": 75,
  "rsi_ovs": 25,
  "base_position_pct": 20.0,
  "pyramiding": 3,
  "use_martingale": true,
  "martingale_mult": 1.5,
  "use_tp_sl": true,
  "tp_long_pct": 5.0,
  "sl_long_pct": 2.0
}
```

---

## –ö–æ–Ω—Ç–∞–∫—Ç—ã –∏ –ø–æ–¥–¥–µ—Ä–∂–∫–∞

**–ê–≤—Ç–æ—Ä –æ—Ç—á–µ—Ç–∞:** Claude (Anthropic)
**–î–∞—Ç–∞:** 2025-11-21
**–í–µ—Ä—Å–∏—è –æ—Ç—á–µ—Ç–∞:** 1.0

–î–ª—è –≤–æ–ø—Ä–æ—Å–æ–≤ –∏ —É—Ç–æ—á–Ω–µ–Ω–∏–π —Å–æ–∑–¥–∞–π—Ç–µ issue –≤ GitHub —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏ –ø—Ä–æ–µ–∫—Ç–∞.

---

**–ö–û–ù–ï–¶ –û–¢–ß–ï–¢–ê**
